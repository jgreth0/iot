
#ifndef _ICMP_HELPER_H_
#define _ICMP_HELPER_H_

////////////////////////////////////////////////////////////////////////////////
// this module detects the presence of a device on the network using Internet
// Control Message Protocol (ICMP) Echo requests and Responses (ping).
////////////////////////////////////////////////////////////////////////////////
class icmp_helper {
private:
    ////////////////////////////////////////////////////////////////////////////
    // Configuration - only written by the constructor.
    ////////////////////////////////////////////////////////////////////////////
    char addr[64];

    ////////////////////////////////////////////////////////////////////////////
    // IO context - A single connection is used multiple times.
    ////////////////////////////////////////////////////////////////////////////
    int seq_num = 1;
    int time_limit = 300;

public:
    ////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////
    icmp_helper(char* addr, int time_limit = 100000);
    icmp_helper(const char* addr, int time_limit = 100000);
    bool ping();
};

#endif
